<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>setInterval & clearInterval 기본 다루기(ifelse, callback, array</title>
    <script
    src="https://code.jquery.com/jquery-2.2.4.min.js"
    integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
    crossorigin="anonymous"></script>
  
</head>
<body>
    <button class="prev">이전</button><button class="next">다음</button>
    <div class="timer">
        4

    </div>
    <script>
        // Q. 화면에 .timer에 입력한 숫자가 출력되고 1초마다 증가하게끔 수정하기
            // 최적화하기
        // let count = $('.timer').html();
        // setInterval(function(){
        //     count++;
        //     $('.timer').html(count);
        // }, 1000)



        // // Q2. 0~4 순환하는 식 1초마다 (나머지연산자 %)
        // setInterval(function(){
        //     _setTimefun($('.timer').html()) //$('.timer').html() -> .timer에 있는 값 연동하겠다
        //     }, 1000)

        // function _setTimefun(count){ //콜백함수의 특징 : 매개인자의 변수는 실행할 때 값을 넣어주면서 사용.
        //     count++;
        //     count = count % 5;
        //     $('.timer').html(count)
        // }

        // // Q3. 함수에 autoTimer 라는 이름 붙여주기
        // var autoTimer = setInterval(function(){
        //     _setTimefun($('.timer').html())
        //     }, 1000) // 아이디를 지정해 두어야 정지시킬 수 있다. 
        // function _setTimefun(count){ //콜백함수의 특징 : 매개인자의 변수는 실행할 때 값을 넣어주면서 사용.
        //     count++;
        //     count = count % 5;
        //     $('.timer').html(count)
        // }

        // Q4. 버튼 클릭시 숫자 증감
        var _classNm = 'next'
        var autoTimer = setInterval(function(){
            _setTimefun($('.timer').html(), _classNm)
            }, 1000)

            $('button').click(function(){
                    // 다음 버튼 실행
                    clearInterval(autoTimer); // autoTimer 기능 없애줘!
                    _classNm = $(this).attr('class'); //class 이름 저장
                    _setTimefun($('.timer').html(), _classNm);

                    //버튼 snfmrh 1초뒤에 autoTimer 기능 생김~!~!
                    //clearInterval(autoTimer);가 다시 실행되도록 변수 이름(autoTimer) 같아야함
                    autoTimer = setInterval(function(){
                        _setTimefun($('.timer').html(), _classNm)
                    }, 1000)
            })

        function _setTimefun(count, dir){
            if (dir == 'next') {
                if(count < 4) count++; else count = 0;
            }
            else{
                if(count > 0) count--; else count = 4;
            }
            
            $('.timer').html(count)
        }


    </script>
</body>
</html>